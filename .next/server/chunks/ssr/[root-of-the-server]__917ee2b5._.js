module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},19736,a=>{"use strict";a.i(35025);var b=a.i(9701);function c(){return(0,b.createBrowserClient)("https://bfjstgfcvbxlvvodqoxd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJmanN0Z2ZjdmJ4bHZ2b2Rxb3hkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc2MDM3NTksImV4cCI6MjA4MzE3OTc1OX0.RF0hN37KQSWNy3YM3JWRJt1D4cIprp9yBizLZY1o8Jk")}a.s(["createClient",()=>c])},66481,a=>{"use strict";async function b(a){try{await fetch("/api/activities",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})}catch(a){console.error("Tracking error:",a)}}a.s(["track",0,{login:()=>b({activity_type:"login"}),videoView:(a,c)=>b({activity_type:"video_view",target_id:a,target_title:c}),videoComplete:(a,c,d)=>b({activity_type:"video_complete",target_id:a,target_title:c,metadata:d?{watch_time:d}:{}}),articleView:(a,c)=>b({activity_type:"article_view",target_id:a,target_title:c}),resourceDownload:(a,c,d)=>b({activity_type:"resource_download",target_id:a,target_title:c,metadata:d?{resource_type:d}:{}}),bookmarkAdd:(a,c)=>b({activity_type:"bookmark_add",target_id:a,target_title:c}),bookmarkRemove:(a,c)=>b({activity_type:"bookmark_remove",target_id:a,target_title:c}),search:(a,c)=>b({activity_type:"search",metadata:{query:a,result_count:c}})}])},3888,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(66481),e=a.i(50944),f=a.i(38246),g=a.i(19736);function h(){let[a,h]=(0,c.useState)(""),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(""),u=(0,e.useRouter)(),v=(0,g.createClient)(),w=async b=>{b.preventDefault(),n(""),p(!0);try{let{data:b,error:c}=await v.auth.signInWithPassword({email:a,password:i});if(c){n(c.message),p(!1);return}if(b.session){let{data:a}=await v.auth.mfa.listFactors();if(a?.totp&&a.totp.length>0){let b=a.totp[0];t(b.id),r(!0),p(!1);return}}d.track.login(),u.push("/"),u.refresh()}catch(a){n("ログインに失敗しました")}finally{p(!1)}},x=async a=>{a.preventDefault(),n(""),p(!0);try{let{data:a,error:b}=await v.auth.mfa.challenge({factorId:s});if(b){n(b.message),p(!1);return}let{error:c}=await v.auth.mfa.verify({factorId:s,challengeId:a.id,code:k});if(c){n("認証コードが正しくありません"),p(!1);return}d.track.login(),u.push("/"),u.refresh()}catch(a){n("2段階認証に失敗しました")}finally{p(!1)}};return q?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,b.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow p-8",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-4",children:"2段階認証"}),(0,b.jsx)("p",{className:"text-center text-gray-600 mb-8",children:"認証アプリに表示されている6桁のコードを入力してください"}),(0,b.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[m&&(0,b.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded text-red-600 text-sm",children:m}),(0,b.jsx)("div",{children:(0,b.jsx)("input",{type:"text",value:k,onChange:a=>l(a.target.value.replace(/\D/g,"").slice(0,6)),required:!0,maxLength:6,className:"w-full px-4 py-4 text-center text-2xl tracking-widest  border border-gray-300 rounded-lg  focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"000000",autoFocus:!0})}),(0,b.jsx)("button",{type:"submit",disabled:o||6!==k.length,className:"w-full py-3 bg-blue-600 text-white rounded-lg  hover:bg-blue-700 disabled:bg-gray-400  transition-colors font-medium",children:o?"確認中...":"確認"})]})]})}):(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,b.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow p-8",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-8",children:"ログイン"}),(0,b.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[m&&(0,b.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded text-red-600 text-sm",children:m}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"メールアドレス"}),(0,b.jsx)("input",{type:"email",value:a,onChange:a=>h(a.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg  focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"example@email.com"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"パスワード"}),(0,b.jsx)("input",{type:"password",value:i,onChange:a=>j(a.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg  focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"••••••••"})]}),(0,b.jsx)("button",{type:"submit",disabled:o,className:"w-full py-3 bg-blue-600 text-white rounded-lg  hover:bg-blue-700 disabled:bg-gray-400  transition-colors font-medium",children:o?"ログイン中...":"ログイン"})]}),(0,b.jsxs)("p",{className:"mt-6 text-center text-sm text-gray-600",children:["アカウントをお持ちでないですか？"," ",(0,b.jsx)(f.default,{href:"/auth/signup",className:"text-blue-600 hover:underline",children:"サインアップ"})]})]})})}a.s(["default",()=>h])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__917ee2b5._.js.map