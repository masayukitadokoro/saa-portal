module.exports=[96221,a=>{"use strict";let b=(0,a.i(70106).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},33441,a=>{"use strict";let b=(0,a.i(70106).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["Check",()=>b],33441)},23397,a=>{"use strict";var b=a.i(87924),c=a.i(72131);let d=(0,a.i(70106).default)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var e=a.i(33441),f=a.i(96221),g=a.i(71987);let h=[{id:"preset_1",label:"ビジネスマン",color:"bg-blue-500"},{id:"preset_2",label:"ビジネスウーマン",color:"bg-pink-500"},{id:"preset_3",label:"クリエイター",color:"bg-purple-500"},{id:"preset_4",label:"エンジニア",color:"bg-green-500"},{id:"preset_5",label:"起業家",color:"bg-orange-500"},{id:"preset_6",label:"研究者",color:"bg-teal-500"},{id:"preset_7",label:"マーケター",color:"bg-red-500"},{id:"preset_8",label:"デザイナー",color:"bg-yellow-500"},{id:"preset_9",label:"コンサルタント",color:"bg-indigo-500"},{id:"preset_10",label:"ニュートラル",color:"bg-gray-500"}];function i(){let[a,i]=(0,c.useState)(null),[j,k]=(0,c.useState)(!0),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(!1),t=(0,c.useRef)(null),[u,v]=(0,c.useState)({first_name:"",last_name:"",display_name:"",company:"",job_title:"",bio:"",avatar_preset:"preset_10",avatar_url:""});(0,c.useEffect)(()=>{w()},[]);let w=async()=>{try{let a=await fetch("/api/mypage/profile");if(a.ok){let b=await a.json();i(b.profile),v({first_name:b.profile.first_name||"",last_name:b.profile.last_name||"",display_name:b.profile.display_name||"",company:b.profile.company||"",job_title:b.profile.job_title||"",bio:b.profile.bio||"",avatar_preset:b.profile.avatar_preset||"preset_10",avatar_url:b.profile.avatar_url||""})}}catch(a){console.error("Failed to fetch profile:",a)}finally{k(!1)}},x=async a=>{a.preventDefault(),m(!0),o(null);try{let a=await fetch("/api/mypage/profile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(a.ok){let b=await a.json();i(b.profile),o({type:"success",text:"プロフィールを更新しました"})}else o({type:"error",text:"更新に失敗しました"})}catch(a){o({type:"error",text:"エラーが発生しました"})}finally{m(!1)}},y=async a=>{let b=a.target.files?.[0];if(!b)return;if(b.size>5242880)return void o({type:"error",text:"ファイルサイズは5MB以下にしてください"});s(!0);let c=new FormData;c.append("file",b);try{let a=await fetch("/api/mypage/profile/avatar",{method:"POST",body:c});if(a.ok){let b=await a.json();v({...u,avatar_url:b.url,avatar_preset:""}),q(!1),o({type:"success",text:"アイコンをアップロードしました"})}else o({type:"error",text:"アップロードに失敗しました"})}catch(a){o({type:"error",text:"エラーが発生しました"})}finally{s(!1)}};return j?(0,b.jsx)("div",{className:"p-8 flex justify-center",children:(0,b.jsx)(f.Loader2,{className:"w-8 h-8 animate-spin text-blue-500"})}):(0,b.jsxs)("div",{className:"p-8",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-8",children:"アカウント設定"}),n&&(0,b.jsx)("div",{className:`mb-6 p-4 rounded-lg ${"success"===n.type?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:n.text}),(0,b.jsxs)("form",{onSubmit:x,children:[(0,b.jsxs)("div",{className:"mb-8 flex items-center gap-6",children:[(0,b.jsx)("div",{className:"text-gray-600 w-32",children:"アイコン"}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[u.avatar_url?(0,b.jsx)("div",{className:"w-20 h-20 rounded-full overflow-hidden",children:(0,b.jsx)(g.default,{src:u.avatar_url,alt:"Avatar",width:80,height:80,className:"object-cover w-full h-full"})}):(0,b.jsx)("div",{className:`w-20 h-20 rounded-full ${(()=>{if(u.avatar_url)return u.avatar_url;let a=h.find(a=>a.id===u.avatar_preset);return a?.color||"bg-gray-500"})()} flex items-center justify-center text-white text-2xl font-bold`,children:u.display_name?.[0]||u.first_name?.[0]||"U"}),(0,b.jsx)("button",{type:"button",onClick:()=>q(!0),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"変更する"})]})]}),(0,b.jsxs)("div",{className:"mb-6 flex items-start gap-6",children:[(0,b.jsx)("div",{className:"text-gray-600 w-32 pt-2",children:"名前"}),(0,b.jsxs)("div",{className:"flex-1 flex gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("label",{className:"block text-sm text-gray-500 mb-1",children:"姓"}),(0,b.jsx)("input",{type:"text",value:u.last_name,onChange:a=>v({...u,last_name:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"田所",maxLength:30})]}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("label",{className:"block text-sm text-gray-500 mb-1",children:"名"}),(0,b.jsx)("input",{type:"text",value:u.first_name,onChange:a=>v({...u,first_name:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"雅之",maxLength:30})]})]})]}),(0,b.jsxs)("div",{className:"mb-6 flex items-center gap-6",children:[(0,b.jsx)("div",{className:"text-gray-600 w-32",children:"表示名"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("input",{type:"text",value:u.display_name,onChange:a=>v({...u,display_name:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"表示名を入力",maxLength:30}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"他のユーザーに表示される名前です"})]})]}),(0,b.jsxs)("div",{className:"mb-6 flex items-center gap-6",children:[(0,b.jsx)("div",{className:"text-gray-600 w-32",children:"メールアドレス"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-600",children:a?.email||"未設定"}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["変更は",(0,b.jsx)("a",{href:"/mypage/settings/email",className:"text-blue-600 hover:underline",children:"メールアドレス設定"}),"から"]})]})]}),(0,b.jsxs)("div",{className:"mb-6 flex items-center gap-6",children:[(0,b.jsx)("div",{className:"text-gray-600 w-32",children:"企業・団体名"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("input",{type:"text",value:u.company,onChange:a=>v({...u,company:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"株式会社〇〇",maxLength:60}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"最大60文字"})]})]}),(0,b.jsxs)("div",{className:"mb-6 flex items-center gap-6",children:[(0,b.jsx)("div",{className:"text-gray-600 w-32",children:"肩書・役職"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("input",{type:"text",value:u.job_title,onChange:a=>v({...u,job_title:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"CEO",maxLength:60}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"最大60文字"})]})]}),(0,b.jsxs)("div",{className:"mb-8 flex items-start gap-6",children:[(0,b.jsx)("div",{className:"text-gray-600 w-32 pt-2",children:"プロフィール"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("textarea",{value:u.bio,onChange:a=>v({...u,bio:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"自己紹介を入力してください",rows:4,maxLength:1024}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["最大1024文字（",u.bio.length,"/1024）"]})]})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)("button",{type:"submit",disabled:l,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:l?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.Loader2,{className:"w-4 h-4 animate-spin"}),"保存中..."]}):"保存する"})})]}),p&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-lg w-full mx-4",children:[(0,b.jsx)("h2",{className:"text-xl font-bold mb-4",children:"アイコンを変更"}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"プリセットから選ぶ"}),(0,b.jsx)("div",{className:"grid grid-cols-5 gap-3",children:h.map(a=>(0,b.jsxs)("button",{type:"button",onClick:()=>{var b;return b=a.id,void(v({...u,avatar_preset:b,avatar_url:""}),q(!1))},className:`relative w-12 h-12 rounded-full ${a.color} flex items-center justify-center text-white text-lg font-bold hover:ring-2 hover:ring-offset-2 hover:ring-blue-500 transition-all ${u.avatar_preset===a.id&&!u.avatar_url?"ring-2 ring-offset-2 ring-blue-500":""}`,title:a.label,children:[a.label[0],u.avatar_preset===a.id&&!u.avatar_url&&(0,b.jsx)("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-blue-600 rounded-full flex items-center justify-center",children:(0,b.jsx)(e.Check,{className:"w-3 h-3 text-white"})})]},a.id))})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"画像をアップロード"}),(0,b.jsx)("input",{ref:t,type:"file",accept:"image/*",onChange:y,className:"hidden"}),(0,b.jsx)("button",{type:"button",onClick:()=>t.current?.click(),disabled:r,className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-blue-500 hover:text-blue-600 transition-colors flex items-center justify-center gap-2",children:r?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.Loader2,{className:"w-5 h-5 animate-spin"}),"アップロード中..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d,{className:"w-5 h-5"}),"画像を選択（5MB以下）"]})})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)("button",{type:"button",onClick:()=>q(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"閉じる"})})]})})]})}a.s(["default",()=>i],23397)}];

//# sourceMappingURL=_2ea20eff._.js.map