module.exports=[79263,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(36545),f=a.i(210),g=a.i(96221),h=a.i(33441),i=a.i(92e3),j=a.i(73320),k=a.i(87654),l=a.i(52495),m=a.i(8406),n=a.i(5151),o=a.i(38632);let p=(0,a.i(70106).default)("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);var q=a.i(67453),r=a.i(97063);function s(){let a=(0,d.useParams)(),s=(0,d.useRouter)(),{profile:t}=(0,e.useAuth)(),u=a.videoId,v=(0,c.useRef)(null),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)(!0),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(null),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(null),[M,N]=(0,c.useState)(null),[O,P]=(0,c.useState)([]),[Q,R]=(0,c.useState)(null),[S,T]=(0,c.useState)("");(0,c.useEffect)(()=>{U(),V()},[u]);let U=async()=>{try{let a=await fetch(`/api/admin/videos/${u}`);if(a.ok){let b=await a.json();if(x(b.video),L(b.video.custom_thumbnail_url||null),N(b.video.thumbnail_url||null),b.video.title){let a=b.video.title.replace(/^\d+-?\d*_/,"").trim();T(a)}}}catch(a){F("å‹•ç”»æƒ…å ±ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ")}finally{z(!1)}},V=async()=>{try{let a=await fetch("/api/admin/thumbnail-templates");if(a.ok){let b=await a.json();b.templates?.length>0&&(P(b.templates),R(b.templates[0]))}}catch{}},W=async a=>{let b=a.target.files?.[0];if(!b)return;if(b.size>5242880)return void F("ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã¯5MBä»¥ä¸‹ã«ã—ã¦ãã ã•ã„");B(!0),F(null);let c=new FormData;c.append("file",b);try{let a=await fetch(`/api/admin/videos/${u}/upload-thumbnail`,{method:"POST",body:c}),b=await a.json();a.ok&&b.url?(await fetch(`/api/admin/videos/${u}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({custom_thumbnail_url:b.url})}),L(b.url),H("ã‚µãƒ ãƒã‚¤ãƒ«ã‚’ä¿å­˜ã—ã¾ã—ãŸï¼"),setTimeout(()=>H(null),5e3)):F(b.error||"ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ")}catch{F("ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ")}finally{B(!1),v.current&&(v.current.value="")}},X=async()=>{if(confirm("ã‚«ã‚¹ã‚¿ãƒ ã‚µãƒ ãƒã‚¤ãƒ«ã‚’å‰Šé™¤ã—ã¦ã€YouTubeã®å…ƒã®ã‚µãƒ ãƒã‚¤ãƒ«ã«æˆ»ã—ã¾ã™ã‹ï¼Ÿ\n\nâ€»ã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“")){D(!0);try{await fetch(`/api/admin/videos/${u}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({custom_thumbnail_url:null})}),L(null),H("YouTubeã®ã‚µãƒ ãƒã‚¤ãƒ«ã«æˆ»ã—ã¾ã—ãŸ"),setTimeout(()=>H(null),3e3)}catch{F("ãƒªã‚»ãƒƒãƒˆã«å¤±æ•—ã—ã¾ã—ãŸ")}finally{D(!1)}}},Y=()=>{s.push("/admin/contents")};return t?y?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsx)(g.Loader2,{className:"w-8 h-8 animate-spin text-purple-600"})}):(0,b.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,b.jsx)("header",{className:"bg-white border-b sticky top-0 z-10",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-3 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("button",{onClick:Y,className:"text-gray-600 hover:text-gray-900 flex items-center gap-1",children:[(0,b.jsx)(f.ArrowLeft,{className:"w-4 h-4"})," å‹•ç”»ä¸€è¦§ã«æˆ»ã‚‹"]}),(0,b.jsx)("span",{className:"text-gray-300",children:"|"}),(0,b.jsx)("h1",{className:"font-semibold",children:"ðŸ–¼ï¸ ã‚µãƒ ãƒã‚¤ãƒ«è¨­å®š"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[E&&(0,b.jsxs)("span",{className:"text-red-600 text-sm flex items-center gap-1",children:[(0,b.jsx)(i.AlertCircle,{className:"w-4 h-4"}),E]}),G&&(0,b.jsxs)("span",{className:"text-green-600 text-sm flex items-center gap-1",children:[(0,b.jsx)(h.Check,{className:"w-4 h-4"}),G]})]})]})}),(0,b.jsxs)("main",{className:"max-w-4xl mx-auto px-4 py-6 space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-5",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("h2",{className:"font-bold text-lg flex items-center gap-2",children:[(0,b.jsx)(o.Image,{className:"w-5 h-5 text-purple-600"}),"ç¾åœ¨ã®ã‚µãƒ ãƒã‚¤ãƒ«"]}),K&&(0,b.jsxs)("button",{onClick:X,disabled:C,className:"text-gray-500 hover:text-gray-700 text-sm flex items-center gap-1 px-3 py-1.5 border border-gray-300 rounded-lg hover:bg-gray-50",children:[C?(0,b.jsx)(g.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsx)(k.RotateCcw,{className:"w-4 h-4"}),"YouTubeã®ã‚µãƒ ãƒã‚¤ãƒ«ã«æˆ»ã™"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden border",children:K?(0,b.jsx)("img",{src:K,alt:"ã‚«ã‚¹ã‚¿ãƒ ã‚µãƒ ãƒã‚¤ãƒ«",className:"w-full h-full object-cover"}):M?(0,b.jsx)("img",{src:M,alt:"YouTubeã‚µãƒ ãƒã‚¤ãƒ«",className:"w-full h-full object-cover"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"ã‚µãƒ ãƒã‚¤ãƒ«ãªã—"})}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-2 truncate",children:w?.title}),K?(0,b.jsx)("span",{className:"inline-block mt-1 text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:"âœ“ ã‚«ã‚¹ã‚¿ãƒ ã‚µãƒ ãƒã‚¤ãƒ«ï¼ˆè‡ªå‹•ä¿å­˜æ¸ˆã¿ï¼‰"}):(0,b.jsx)("span",{className:"inline-block mt-1 text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full",children:"YouTubeã®å…ƒã‚µãƒ ãƒã‚¤ãƒ«"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("input",{ref:v,type:"file",accept:"image/*",onChange:W,className:"hidden"}),(0,b.jsx)("button",{onClick:()=>v.current?.click(),disabled:A,className:"w-full h-full min-h-[180px] border-2 border-dashed border-purple-300 rounded-lg text-purple-600 hover:border-purple-500 hover:bg-purple-50 transition flex flex-col items-center justify-center gap-2",children:A?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.Loader2,{className:"w-8 h-8 animate-spin"}),(0,b.jsx)("span",{className:"font-medium",children:"ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ä¸­..."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Upload,{className:"w-10 h-10"}),(0,b.jsx)("span",{className:"font-bold",children:"ã‚µãƒ ãƒã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰"}),(0,b.jsx)("span",{className:"text-xs text-purple-400",children:"1280 x 720px æŽ¨å¥¨ãƒ»5MBä»¥ä¸‹"}),(0,b.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:"â€»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¨è‡ªå‹•ã§ä¿å­˜ã•ã‚Œã¾ã™"})]})})]})]}),K&&(0,b.jsx)("div",{className:"mt-4 p-4 bg-green-50 rounded-lg border border-green-200",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("span",{className:"text-green-700 font-medium flex items-center gap-2",children:[(0,b.jsx)(q.CheckCircle2,{className:"w-5 h-5"}),"ã‚µãƒ ãƒã‚¤ãƒ«ãŒä¿å­˜ã•ã‚Œã¾ã—ãŸï¼"]}),(0,b.jsx)("button",{onClick:Y,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm font-medium",children:"å‹•ç”»ä¸€è¦§ã«æˆ»ã‚‹ â†’"})]})})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-indigo-50 rounded-xl shadow-sm p-5 border border-purple-100",children:[(0,b.jsxs)("h2",{className:"font-bold text-lg mb-5 flex items-center gap-2",children:[(0,b.jsx)(m.Sparkles,{className:"w-6 h-6 text-yellow-500"}),"Geminiã§ã‚µãƒ ãƒã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹æ‰‹é †"]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)("span",{className:"w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"1"}),(0,b.jsx)("h3",{className:"font-bold text-gray-900",children:"ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸ã‚“ã§ã€Geminiã«è²¼ã‚Šä»˜ã‘"})]}),O.length>0?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-5 gap-2 mb-3",children:O.map(a=>(0,b.jsxs)("button",{onClick:()=>R(a),className:`relative rounded-lg overflow-hidden border-2 transition ${Q?.id===a.id?"border-purple-500 ring-2 ring-purple-200":"border-gray-200 hover:border-gray-300"}`,children:[(0,b.jsx)("div",{className:"aspect-video bg-gray-200",children:(0,b.jsx)("img",{src:a.url,alt:a.name,className:"w-full h-full object-cover"})}),Q?.id===a.id&&(0,b.jsx)("div",{className:"absolute top-1 right-1 w-5 h-5 bg-purple-600 rounded-full flex items-center justify-center",children:(0,b.jsx)(h.Check,{className:"w-3 h-3 text-white"})})]},a.id))}),(0,b.jsxs)("button",{onClick:()=>{Q?.url&&window.open(Q.url,"_blank")},disabled:!Q,className:"w-full py-2.5 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[(0,b.jsx)(p,{className:"w-4 h-4"}),"ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’æ‹¡å¤§è¡¨ç¤ºï¼ˆå³ã‚¯ãƒªãƒƒã‚¯â†’ç”»åƒã‚’ã‚³ãƒ”ãƒ¼ï¼‰"]})]}):(0,b.jsx)("p",{className:"text-gray-500 text-sm",children:"ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒã‚ã‚Šã¾ã›ã‚“"}),(0,b.jsxs)("div",{className:"mt-3 flex items-center gap-3",children:[(0,b.jsxs)("a",{href:"https://gemini.google.com",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center gap-2 px-4 py-2.5 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition",children:["Geminiã‚’é–‹ã ",(0,b.jsx)(l.ExternalLink,{className:"w-4 h-4"})]}),(0,b.jsx)("span",{className:"text-sm text-gray-500",children:"â†’ ã‚³ãƒ”ãƒ¼ã—ãŸç”»åƒã‚’è²¼ã‚Šä»˜ã‘"})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)("span",{className:"w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"2"}),(0,b.jsx)("h3",{className:"font-bold text-gray-900",children:"ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’é€ä¿¡ã—ã¦ç”»åƒã‚’ç”Ÿæˆ"})]}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ã‚µãƒ ãƒã‚¤ãƒ«ã®ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆç·¨é›†ã—ã¦ã‹ã‚‰ã‚³ãƒ”ãƒ¼ï¼‰"}),(0,b.jsx)("input",{type:"text",value:S,onChange:a=>T(a.target.value),className:"w-full px-4 py-3 border-2 border-purple-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-lg font-medium",placeholder:"ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›"})]}),(0,b.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 mb-3",children:(0,b.jsxs)("p",{className:"text-gray-800 leading-relaxed",children:["ã“ã®ã‚µãƒ ãƒã‚¤ãƒ«ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’ã€Œ",(0,b.jsx)("span",{className:"font-bold text-purple-700 bg-purple-100 px-1 rounded",children:S||"ã‚¿ã‚¤ãƒˆãƒ«"}),"ã€ã«å¤‰ãˆã¦ä½œæˆã—ã¦ã€‚ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ†ã‚¤ã‚¹ãƒˆã€ãƒ•ã‚©ãƒ³ãƒˆã€ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã¯å‚è€ƒç”»åƒã¨åŒã˜ã«ã—ã¦ã€‚"]})}),(0,b.jsx)("button",{onClick:()=>{let a=`ã“ã®ã‚µãƒ ãƒã‚¤ãƒ«ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’ã€Œ${S}ã€ã«å¤‰ãˆã¦ä½œæˆã—ã¦ã€‚ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ†ã‚¤ã‚¹ãƒˆã€ãƒ•ã‚©ãƒ³ãƒˆã€ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã¯å‚è€ƒç”»åƒã¨åŒã˜ã«ã—ã¦ã€‚`;navigator.clipboard.writeText(a),J(!0),setTimeout(()=>J(!1),2e3)},className:"w-full py-3 bg-purple-100 text-purple-700 rounded-lg font-bold hover:bg-purple-200 flex items-center justify-center gap-2 text-base",children:I?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Check,{className:"w-5 h-5"})," ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.Copy,{className:"w-5 h-5"})," ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ã‚³ãƒ”ãƒ¼"]})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)("span",{className:"w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"3"}),(0,b.jsx)("h3",{className:"font-bold text-gray-900",children:"ç”Ÿæˆã•ã‚ŒãŸç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰"})]}),(0,b.jsx)("p",{className:"text-gray-600 mb-3",children:"Geminiã§ç”Ÿæˆã•ã‚ŒãŸç”»åƒã‚’å³ã‚¯ãƒªãƒƒã‚¯ â†’ã€Œåå‰ã‚’ä»˜ã‘ã¦ç”»åƒã‚’ä¿å­˜ã€ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã€ä¸Šã®ã€Œã‚µãƒ ãƒã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã€ã‚¨ãƒªã‚¢ã«ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—ã—ã¦ãã ã•ã„ã€‚"}),(0,b.jsx)("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"text-purple-600 hover:text-purple-800 font-medium flex items-center gap-1",children:"â†‘ ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒªã‚¢ã«ç§»å‹•"})]}),(0,b.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-5 border border-yellow-300",children:[(0,b.jsxs)("p",{className:"font-bold text-yellow-800 mb-3 flex items-center gap-2 text-base",children:[(0,b.jsx)(r.Info,{className:"w-5 h-5"}),"é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ"]}),(0,b.jsxs)("ul",{className:"text-yellow-800 space-y-2",children:[(0,b.jsxs)("li",{className:"flex items-start gap-2",children:[(0,b.jsx)("span",{className:"font-bold text-yellow-600",children:"â‘ "}),(0,b.jsxs)("span",{children:["Geminiã®å³ä¸Šã§",(0,b.jsx)("strong",{children:"ã€Œæ€è€ƒãƒ¢ãƒ¼ãƒ‰ã€"}),"ã‚’é¸æŠžã—ã¦ãã ã•ã„ï¼ˆé«˜é€Ÿãƒ¢ãƒ¼ãƒ‰ã ã¨ç”»åƒç”Ÿæˆã§ãã¾ã›ã‚“ï¼‰"]})]}),(0,b.jsxs)("li",{className:"flex items-start gap-2",children:[(0,b.jsx)("span",{className:"font-bold text-yellow-600",children:"â‘¡"}),(0,b.jsxs)("span",{children:["ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’é€ä¿¡ã—ãŸã‚‰ã€ä¸‹ã«è¡¨ç¤ºã•ã‚Œã‚‹",(0,b.jsx)("strong",{children:"ã€ŒðŸŒç”»åƒã®ä½œæˆã€"}),"ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯"]})]}),(0,b.jsxs)("li",{className:"flex items-start gap-2",children:[(0,b.jsx)("span",{className:"font-bold text-yellow-600",children:"â‘¢"}),(0,b.jsx)("span",{children:"æ°—ã«å…¥ã‚‰ãªã‘ã‚Œã°ã€Œå†ç”Ÿæˆã€ãƒœã‚¿ãƒ³ã§ä½•åº¦ã§ã‚‚ã‚„ã‚Šç›´ã—OK"})]}),(0,b.jsxs)("li",{className:"flex items-start gap-2",children:[(0,b.jsx)("span",{className:"font-bold text-yellow-600",children:"â‘£"}),(0,b.jsx)("span",{children:"ç”°æ‰€ã•ã‚“ã®é¡”ã‚’å¤‰ãˆãŸã„å ´åˆã¯ã€åˆ¥ã®å†™çœŸã‚‚ä¸€ç·’ã«æ·»ä»˜"})]})]})]})]})]})]})]}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsx)("p",{children:"ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™"})})}a.s(["default",()=>s],79263)}];

//# sourceMappingURL=app_admin_videos_%5BvideoId%5D_thumbnail_page_tsx_cb7cdd58._.js.map