module.exports=[4720,a=>{"use strict";let b=(0,a.i(70106).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);a.s(["FileText",()=>b],4720)},33508,a=>{"use strict";let b=(0,a.i(70106).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["X",()=>b],33508)},25015,a=>{"use strict";let b=(0,a.i(70106).default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);a.s(["Play",()=>b],25015)},46842,a=>{"use strict";let b=(0,a.i(70106).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>b],46842)},38617,a=>{"use strict";let b=(0,a.i(70106).default)("bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);a.s(["Bookmark",()=>b],38617)},24669,a=>{"use strict";let b=(0,a.i(70106).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);a.s(["TrendingUp",()=>b],24669)},42859,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(33508),e=a.i(46842),f=a.i(92258),g=a.i(41710),h=a.i(21374),i=a.i(11156),j=a.i(38617),k=a.i(25015),l=a.i(87532),m=a.i(4720),n=a.i(70106);let o=(0,n.default)("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]);var p=a.i(24669);let q=(0,n.default)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);var r=a.i(73570);function s({userId:a,onClose:n,onAction:s}){var t;let u,[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(!0),[z,A]=(0,c.useState)("overview");async function B(){y(!0);try{let b=await fetch(`/api/admin/users/${a}`);if(b.ok){let a=await b.json();w(a)}}catch(a){console.error("Failed to load user detail:",a)}finally{y(!1)}}(0,c.useEffect)(()=>{B()},[a]);let C=a=>a?new Date(a).toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-";if(x)return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,b.jsx)("div",{className:"bg-white rounded-lg p-8",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})})});if(!v)return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg p-8",children:[(0,b.jsx)("p",{className:"text-red-600",children:"ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ"}),(0,b.jsx)("button",{onClick:n,className:"mt-4 px-4 py-2 bg-gray-200 rounded",children:"é–‰ã˜ã‚‹"})]})});let{user:D,stats:E,stats7Days:F,engagementScore:G,churnRisk:H,recentActivities:I}=v,J=(t=D.trial_ends_at,u=new Date,Math.ceil((new Date(t).getTime()-u.getTime())/864e5)),K="high"===H?{bg:"bg-red-50 border-red-200",icon:(0,b.jsx)(r.AlertTriangle,{className:"w-5 h-5 text-red-500"}),label:"é«˜ãƒªã‚¹ã‚¯",labelColor:"text-red-700",description:"10ç‚¹ä»¥ä¸‹ï¼šæ—©æ€¥ãªå¯¾å¿œãŒå¿…è¦",scoreBg:"bg-red-100",scoreColor:"text-red-700"}:"medium"===H?{bg:"bg-yellow-50 border-yellow-200",icon:(0,b.jsx)(q,{className:"w-5 h-5 text-yellow-500"}),label:"ä¸­ãƒªã‚¹ã‚¯",labelColor:"text-yellow-700",description:"11-20ç‚¹ï¼šæ³¨æ„ãŒå¿…è¦",scoreBg:"bg-yellow-100",scoreColor:"text-yellow-700"}:{bg:"bg-green-50 border-green-200",icon:(0,b.jsx)(p.TrendingUp,{className:"w-5 h-5 text-green-500"}),label:"ä½Žãƒªã‚¹ã‚¯",labelColor:"text-green-700",description:"21ç‚¹ä»¥ä¸Šï¼šè‰¯å¥½",scoreBg:"bg-green-100",scoreColor:"text-green-700"},L=[{label:"ãƒ­ã‚°ã‚¤ãƒ³",icon:o,count:F.login,unit:"å›ž",multiplier:10,color:"text-blue-500"},{label:"å‹•ç”»è¦–è´",icon:k.Play,count:F.videoView,unit:"æœ¬",multiplier:5,color:"text-green-500"},{label:"è¨˜äº‹é–²è¦§",icon:m.FileText,count:F.articleView,unit:"ä»¶",multiplier:5,color:"text-purple-500"},{label:"æ¤œç´¢",icon:l.Search,count:F.search,unit:"å›ž",multiplier:2,color:"text-orange-500"},{label:"ãƒ–ãƒƒã‚¯ãƒžãƒ¼ã‚¯",icon:j.Bookmark,count:F.bookmarkAdd,unit:"ä»¶",multiplier:3,color:"text-yellow-500"}];return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-lg font-bold",children:"ãƒ¦ãƒ¼ã‚¶ãƒ¼è©³ç´°"}),(0,b.jsx)("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded",children:(0,b.jsx)(d.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:(0,b.jsx)(e.User,{className:"w-6 h-6 text-gray-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-bold",children:D.display_name||D.email}),(0,b.jsxs)("p",{className:"text-gray-500 text-sm flex items-center gap-1",children:[(0,b.jsx)(f.Mail,{className:"w-4 h-4"})," ",D.email]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,b.jsx)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 rounded-full",children:D.is_super_user?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Star,{className:"w-4 h-4 text-yellow-500"})," ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼"]}):"paid"===D.plan_type?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.CreditCard,{className:"w-4 h-4 text-green-500"})," æœ‰æ–™ä¼šå“¡"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.Clock,{className:"w-4 h-4 text-blue-500"})," ãƒˆãƒ©ã‚¤ã‚¢ãƒ«ï¼ˆæ®‹ã‚Š",J,"æ—¥ï¼‰"]})}),(0,b.jsxs)("span",{className:"text-gray-400",children:["ç™»éŒ²: ",C(D.created_at)]})]}),(0,b.jsx)("div",{className:"border-b",children:(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("button",{onClick:()=>A("overview"),className:`pb-2 px-1 text-sm font-medium border-b-2 transition ${"overview"===z?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆåˆ†æž"}),(0,b.jsx)("button",{onClick:()=>A("activity"),className:`pb-2 px-1 text-sm font-medium border-b-2 transition ${"activity"===z?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£å±¥æ­´"})]})}),"overview"===z?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:`rounded-lg border p-4 ${K.bg}`,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[K.icon,(0,b.jsxs)("span",{className:`font-bold ${K.labelColor}`,children:["è§£ç´„ãƒªã‚¹ã‚¯: ",K.label]})]}),(0,b.jsxs)("div",{className:`px-4 py-2 rounded-lg ${K.scoreBg}`,children:[(0,b.jsx)("span",{className:`text-2xl font-bold ${K.scoreColor}`,children:G}),(0,b.jsx)("span",{className:`text-sm ${K.scoreColor}`,children:"/100ç‚¹"})]})]}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:K.description})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium mb-3 flex items-center gap-2",children:"ðŸ“Š ã‚¹ã‚³ã‚¢å†…è¨³ï¼ˆéŽåŽ»7æ—¥é–“ï¼‰"}),(0,b.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"text-left py-2 px-4 font-medium text-gray-600",children:"æŒ‡æ¨™"}),(0,b.jsx)("th",{className:"text-center py-2 px-4 font-medium text-gray-600",children:"å›žæ•°"}),(0,b.jsx)("th",{className:"text-center py-2 px-4 font-medium text-gray-600",children:"Ã—"}),(0,b.jsx)("th",{className:"text-center py-2 px-4 font-medium text-gray-600",children:"ç‚¹æ•°"}),(0,b.jsx)("th",{className:"text-right py-2 px-4 font-medium text-gray-600",children:"å¾—ç‚¹"})]})}),(0,b.jsx)("tbody",{children:L.map((a,c)=>{let d=a.icon,e=a.count*a.multiplier;return(0,b.jsxs)("tr",{className:c%2==0?"bg-white":"bg-gray-50",children:[(0,b.jsxs)("td",{className:"py-2 px-4 flex items-center gap-2",children:[(0,b.jsx)(d,{className:`w-4 h-4 ${a.color}`}),a.label]}),(0,b.jsxs)("td",{className:"py-2 px-4 text-center",children:[a.count,a.unit]}),(0,b.jsx)("td",{className:"py-2 px-4 text-center text-gray-400",children:"Ã—"}),(0,b.jsxs)("td",{className:"py-2 px-4 text-center text-gray-500",children:[a.multiplier,"ç‚¹"]}),(0,b.jsxs)("td",{className:"py-2 px-4 text-right font-medium",children:[e,"ç‚¹"]})]},a.label)})}),(0,b.jsx)("tfoot",{className:"bg-gray-100",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{colSpan:4,className:"py-2 px-4 font-bold text-right",children:"åˆè¨ˆ"}),(0,b.jsxs)("td",{className:"py-2 px-4 text-right font-bold text-blue-600",children:[G,"ç‚¹"]})]})})]})})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,b.jsx)("h4",{className:"font-medium mb-2",children:"ðŸ“ˆ ç´¯è¨ˆå®Ÿç¸¾"}),(0,b.jsxs)("div",{className:"flex gap-6 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500",children:"å‹•ç”»è¦–è´: "}),(0,b.jsxs)("span",{className:"font-medium",children:[E.watchHistoryCount,"æœ¬"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500",children:"ãƒ–ãƒƒã‚¯ãƒžãƒ¼ã‚¯: "}),(0,b.jsxs)("span",{className:"font-medium",children:[E.bookmarkCount,"ä»¶"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500",children:"è¦–è´å®Œäº†: "}),(0,b.jsxs)("span",{className:"font-medium",children:[E.completedCount,"æœ¬"]})]})]})]})]}):(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium mb-3",children:"æœ€è¿‘ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£"}),I&&I.length>0?(0,b.jsx)("div",{className:"space-y-2",children:I.map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[(a=>{switch(a){case"login":return(0,b.jsx)(o,{className:"w-4 h-4 text-blue-500"});case"video_view":return(0,b.jsx)(k.Play,{className:"w-4 h-4 text-green-500"});case"article_view":return(0,b.jsx)(m.FileText,{className:"w-4 h-4 text-purple-500"});case"search":return(0,b.jsx)(l.Search,{className:"w-4 h-4 text-orange-500"});case"bookmark_add":return(0,b.jsx)(j.Bookmark,{className:"w-4 h-4 text-yellow-500"});default:return(0,b.jsx)(g.Clock,{className:"w-4 h-4 text-gray-400"})}})(a.activity_type),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("span",{className:"font-medium text-sm",children:(a=>{switch(a){case"login":return"ãƒ­ã‚°ã‚¤ãƒ³";case"video_view":return"å‹•ç”»è¦–è´";case"article_view":return"è¨˜äº‹é–²è¦§";case"search":return"æ¤œç´¢";case"bookmark_add":return"ãƒ–ãƒƒã‚¯ãƒžãƒ¼ã‚¯è¿½åŠ ";case"bookmark_remove":return"ãƒ–ãƒƒã‚¯ãƒžãƒ¼ã‚¯å‰Šé™¤";default:return a}})(a.activity_type)}),a.target_title&&(0,b.jsxs)("span",{className:"text-gray-500 text-sm ml-2",children:["- ",a.target_title]})]}),(0,b.jsx)("span",{className:"text-xs text-gray-400",children:C(a.created_at)})]},a.id))}):(0,b.jsx)("p",{className:"text-gray-500 text-center py-8",children:"ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ãŒã‚ã‚Šã¾ã›ã‚“"})]})]})]})})}a.s(["default",()=>s],42859)}];

//# sourceMappingURL=_9b8af303._.js.map