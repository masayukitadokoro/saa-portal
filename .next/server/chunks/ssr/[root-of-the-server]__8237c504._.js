module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},19736,a=>{"use strict";a.i(35025);var b=a.i(9701);function c(){return(0,b.createBrowserClient)("https://bfjstgfcvbxlvvodqoxd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJmanN0Z2ZjdmJ4bHZ2b2Rxb3hkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc2MDM3NTksImV4cCI6MjA4MzE3OTc1OX0.RF0hN37KQSWNy3YM3JWRJt1D4cIprp9yBizLZY1o8Jk")}a.s(["createClient",()=>c])},93852,a=>{"use strict";a.i(87924);var b=a.i(72131);a.i(19736);let c=(0,b.createContext)({user:null,session:null,isLoading:!0,signOut:async()=>{}});a.s(["useAuth",0,()=>(0,b.useContext)(c)])},71853,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(19736),f=a.i(93852);function g(){let[a,g]=(0,c.useState)(""),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(""),t=(0,d.useRouter)(),{user:u}=(0,f.useAuth)(),v=(0,e.createClient)();(0,c.useEffect)(()=>{w()},[]);let w=async()=>{let{data:a}=await v.auth.mfa.listFactors();a?.totp&&a.totp.length>0&&(q(!0),s(a.totp[0].id))},x=async()=>{o(!0),m("");try{let{data:a,error:b}=await v.auth.mfa.enroll({factorType:"totp",friendlyName:"å‹•ç”»æ¤œç´¢ã‚¢ãƒ—ãƒª"});if(b)return void m(b.message);a&&(g(a.totp.qr_code),i(a.totp.secret),s(a.id))}catch(a){m("2FAè¨­å®šã®é–‹å§‹ã«å¤±æ•—ã—ã¾ã—ãŸ")}finally{o(!1)}},y=async a=>{a.preventDefault(),o(!0),m("");try{let{data:a,error:b}=await v.auth.mfa.challenge({factorId:r});if(b)return void m(b.message);let{error:c}=await v.auth.mfa.verify({factorId:r,challengeId:a.id,code:j});if(c)return void m("èªè¨¼ã‚³ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“");q(!0),g(""),i("")}catch(a){m("2FAã®æœ‰åŠ¹åŒ–ã«å¤±æ•—ã—ã¾ã—ãŸ")}finally{o(!1)}},z=async()=>{if(confirm("2æ®µéšŽèªè¨¼ã‚’ç„¡åŠ¹ã«ã—ã¾ã™ã‹ï¼Ÿ")){o(!0);try{let{error:a}=await v.auth.mfa.unenroll({factorId:r});a?m(a.message):(q(!1),s(""))}catch(a){m("2FAã®ç„¡åŠ¹åŒ–ã«å¤±æ•—ã—ã¾ã—ãŸ")}finally{o(!1)}}};return u?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,b.jsxs)("div",{className:"max-w-md mx-auto bg-white rounded-lg shadow p-8",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-8",children:"2æ®µéšŽèªè¨¼è¨­å®š"}),l&&(0,b.jsx)("div",{className:"mb-6 p-3 bg-red-50 border border-red-200 rounded text-red-600 text-sm",children:l}),p?(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-5xl mb-4",children:"ðŸ”’"}),(0,b.jsx)("p",{className:"text-green-600 font-medium mb-6",children:"2æ®µéšŽèªè¨¼ãŒæœ‰åŠ¹ã§ã™"}),(0,b.jsx)("button",{onClick:z,disabled:n,className:"px-6 py-2 text-red-600 border border-red-300 rounded-lg  hover:bg-red-50 disabled:opacity-50",children:n?"å‡¦ç†ä¸­...":"2FAã‚’ç„¡åŠ¹ã«ã™ã‚‹"})]}):a?(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-600 mb-4 text-center",children:"èªè¨¼ã‚¢ãƒ—ãƒªï¼ˆGoogle Authenticatorç­‰ï¼‰ã§QRã‚³ãƒ¼ãƒ‰ã‚’ã‚¹ã‚­ãƒ£ãƒ³ã—ã¦ãã ã•ã„"}),(0,b.jsx)("div",{className:"flex justify-center mb-6",children:(0,b.jsx)("img",{src:a,alt:"2FA QR Code",className:"w-48 h-48"})}),(0,b.jsxs)("div",{className:"mb-6 p-3 bg-gray-100 rounded text-center",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"æ‰‹å‹•å…¥åŠ›ç”¨ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ"}),(0,b.jsx)("code",{className:"text-sm break-all",children:h})]}),(0,b.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"èªè¨¼ã‚¢ãƒ—ãƒªã«è¡¨ç¤ºã•ã‚ŒãŸ6æ¡ã®ã‚³ãƒ¼ãƒ‰"}),(0,b.jsx)("input",{type:"text",value:j,onChange:a=>k(a.target.value.replace(/\D/g,"").slice(0,6)),required:!0,maxLength:6,className:"w-full px-4 py-3 text-center text-xl tracking-widest  border border-gray-300 rounded-lg  focus:ring-2 focus:ring-blue-500",placeholder:"000000"})]}),(0,b.jsx)("button",{type:"submit",disabled:n||6!==j.length,className:"w-full py-3 bg-blue-600 text-white rounded-lg  hover:bg-blue-700 disabled:bg-gray-400",children:n?"ç¢ºèªä¸­...":"2FAã‚’æœ‰åŠ¹ã«ã™ã‚‹"})]})]}):(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-5xl mb-4",children:"ðŸ”"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:"2æ®µéšŽèªè¨¼ã‚’è¨­å®šã™ã‚‹ã¨ã€ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã«èªè¨¼ã‚¢ãƒ—ãƒªã®ã‚³ãƒ¼ãƒ‰ãŒå¿…è¦ã«ãªã‚Šã€ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãŒå‘ä¸Šã—ã¾ã™ã€‚"}),(0,b.jsx)("button",{onClick:x,disabled:n,className:"px-6 py-3 bg-blue-600 text-white rounded-lg  hover:bg-blue-700 disabled:bg-gray-400",children:n?"æº–å‚™ä¸­...":"2FAã‚’è¨­å®šã™ã‚‹"})]}),(0,b.jsx)("div",{className:"mt-8 text-center",children:(0,b.jsx)("button",{onClick:()=>t.push("/"),className:"text-gray-500 hover:text-gray-700",children:"â† ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹"})})]})}):(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("p",{children:"ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„"})})}a.s(["default",()=>g])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__8237c504._.js.map