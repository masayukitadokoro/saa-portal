(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78583,e=>{"use strict";let t=(0,e.i(75254).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],78583)},37727,e=>{"use strict";let t=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],37727)},31343,e=>{"use strict";let t=(0,e.i(75254).default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);e.s(["Play",()=>t],31343)},84614,e=>{"use strict";let t=(0,e.i(75254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],84614)},71930,e=>{"use strict";let t=(0,e.i(75254).default)("bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);e.s(["Bookmark",()=>t],71930)},25652,e=>{"use strict";let t=(0,e.i(75254).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>t],25652)},17230,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(37727),l=e.i(84614),r=e.i(63488),i=e.i(3116),c=e.i(70273),n=e.i(61659),d=e.i(71930),x=e.i(31343),o=e.i(55436),m=e.i(78583),h=e.i(75254);let u=(0,h.default)("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]);var p=e.i(25652);let g=(0,h.default)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);var b=e.i(78894);function y({userId:e,onClose:h,onAction:y}){var j;let f,[N,v]=(0,s.useState)(null),[w,k]=(0,s.useState)(!0),[C,_]=(0,s.useState)("overview");async function M(){k(!0);try{let t=await fetch(`/api/admin/users/${e}`);if(t.ok){let e=await t.json();v(e)}}catch(e){console.error("Failed to load user detail:",e)}finally{k(!1)}}(0,s.useEffect)(()=>{M()},[e]);let T=e=>e?new Date(e).toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-";if(w)return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,t.jsx)("div",{className:"bg-white rounded-lg p-8",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})})});if(!N)return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-8",children:[(0,t.jsx)("p",{className:"text-red-600",children:"ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ"}),(0,t.jsx)("button",{onClick:h,className:"mt-4 px-4 py-2 bg-gray-200 rounded",children:"é–‰ã˜ã‚‹"})]})});let{user:B,stats:S,stats7Days:$,engagementScore:z,churnRisk:F,recentActivities:A}=N,H=(j=B.trial_ends_at,f=new Date,Math.ceil((new Date(j).getTime()-f.getTime())/864e5)),P="high"===F?{bg:"bg-red-50 border-red-200",icon:(0,t.jsx)(b.AlertTriangle,{className:"w-5 h-5 text-red-500"}),label:"é«˜ãƒªã‚¹ã‚¯",labelColor:"text-red-700",description:"10ç‚¹ä»¥ä¸‹ï¼šæ—©æ€¥ãªå¯¾å¿œãŒå¿…è¦",scoreBg:"bg-red-100",scoreColor:"text-red-700"}:"medium"===F?{bg:"bg-yellow-50 border-yellow-200",icon:(0,t.jsx)(g,{className:"w-5 h-5 text-yellow-500"}),label:"ä¸­ãƒªã‚¹ã‚¯",labelColor:"text-yellow-700",description:"11-20ç‚¹ï¼šæ³¨æ„ãŒå¿…è¦",scoreBg:"bg-yellow-100",scoreColor:"text-yellow-700"}:{bg:"bg-green-50 border-green-200",icon:(0,t.jsx)(p.TrendingUp,{className:"w-5 h-5 text-green-500"}),label:"ä½Žãƒªã‚¹ã‚¯",labelColor:"text-green-700",description:"21ç‚¹ä»¥ä¸Šï¼šè‰¯å¥½",scoreBg:"bg-green-100",scoreColor:"text-green-700"},U=[{label:"ãƒ­ã‚°ã‚¤ãƒ³",icon:u,count:$.login,unit:"å›ž",multiplier:10,color:"text-blue-500"},{label:"å‹•ç”»è¦–è´",icon:x.Play,count:$.videoView,unit:"æœ¬",multiplier:5,color:"text-green-500"},{label:"è¨˜äº‹é–²è¦§",icon:m.FileText,count:$.articleView,unit:"ä»¶",multiplier:5,color:"text-purple-500"},{label:"æ¤œç´¢",icon:o.Search,count:$.search,unit:"å›ž",multiplier:2,color:"text-orange-500"},{label:"ãƒ–ãƒƒã‚¯ãƒžãƒ¼ã‚¯",icon:d.Bookmark,count:$.bookmarkAdd,unit:"ä»¶",multiplier:3,color:"text-yellow-500"}];return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-lg font-bold",children:"ãƒ¦ãƒ¼ã‚¶ãƒ¼è©³ç´°"}),(0,t.jsx)("button",{onClick:h,className:"p-2 hover:bg-gray-100 rounded",children:(0,t.jsx)(a.X,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:(0,t.jsx)(l.User,{className:"w-6 h-6 text-gray-500"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-bold",children:B.display_name||B.email}),(0,t.jsxs)("p",{className:"text-gray-500 text-sm flex items-center gap-1",children:[(0,t.jsx)(r.Mail,{className:"w-4 h-4"})," ",B.email]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,t.jsx)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 rounded-full",children:B.is_super_user?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Star,{className:"w-4 h-4 text-yellow-500"})," ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼"]}):"paid"===B.plan_type?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.CreditCard,{className:"w-4 h-4 text-green-500"})," æœ‰æ–™ä¼šå“¡"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Clock,{className:"w-4 h-4 text-blue-500"})," ãƒˆãƒ©ã‚¤ã‚¢ãƒ«ï¼ˆæ®‹ã‚Š",H,"æ—¥ï¼‰"]})}),(0,t.jsxs)("span",{className:"text-gray-400",children:["ç™»éŒ²: ",T(B.created_at)]})]}),(0,t.jsx)("div",{className:"border-b",children:(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("button",{onClick:()=>_("overview"),className:`pb-2 px-1 text-sm font-medium border-b-2 transition ${"overview"===C?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆåˆ†æž"}),(0,t.jsx)("button",{onClick:()=>_("activity"),className:`pb-2 px-1 text-sm font-medium border-b-2 transition ${"activity"===C?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£å±¥æ­´"})]})}),"overview"===C?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:`rounded-lg border p-4 ${P.bg}`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[P.icon,(0,t.jsxs)("span",{className:`font-bold ${P.labelColor}`,children:["è§£ç´„ãƒªã‚¹ã‚¯: ",P.label]})]}),(0,t.jsxs)("div",{className:`px-4 py-2 rounded-lg ${P.scoreBg}`,children:[(0,t.jsx)("span",{className:`text-2xl font-bold ${P.scoreColor}`,children:z}),(0,t.jsx)("span",{className:`text-sm ${P.scoreColor}`,children:"/100ç‚¹"})]})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:P.description})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium mb-3 flex items-center gap-2",children:"ðŸ“Š ã‚¹ã‚³ã‚¢å†…è¨³ï¼ˆéŽåŽ»7æ—¥é–“ï¼‰"}),(0,t.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-left py-2 px-4 font-medium text-gray-600",children:"æŒ‡æ¨™"}),(0,t.jsx)("th",{className:"text-center py-2 px-4 font-medium text-gray-600",children:"å›žæ•°"}),(0,t.jsx)("th",{className:"text-center py-2 px-4 font-medium text-gray-600",children:"Ã—"}),(0,t.jsx)("th",{className:"text-center py-2 px-4 font-medium text-gray-600",children:"ç‚¹æ•°"}),(0,t.jsx)("th",{className:"text-right py-2 px-4 font-medium text-gray-600",children:"å¾—ç‚¹"})]})}),(0,t.jsx)("tbody",{children:U.map((e,s)=>{let a=e.icon,l=e.count*e.multiplier;return(0,t.jsxs)("tr",{className:s%2==0?"bg-white":"bg-gray-50",children:[(0,t.jsxs)("td",{className:"py-2 px-4 flex items-center gap-2",children:[(0,t.jsx)(a,{className:`w-4 h-4 ${e.color}`}),e.label]}),(0,t.jsxs)("td",{className:"py-2 px-4 text-center",children:[e.count,e.unit]}),(0,t.jsx)("td",{className:"py-2 px-4 text-center text-gray-400",children:"Ã—"}),(0,t.jsxs)("td",{className:"py-2 px-4 text-center text-gray-500",children:[e.multiplier,"ç‚¹"]}),(0,t.jsxs)("td",{className:"py-2 px-4 text-right font-medium",children:[l,"ç‚¹"]})]},e.label)})}),(0,t.jsx)("tfoot",{className:"bg-gray-100",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{colSpan:4,className:"py-2 px-4 font-bold text-right",children:"åˆè¨ˆ"}),(0,t.jsxs)("td",{className:"py-2 px-4 text-right font-bold text-blue-600",children:[z,"ç‚¹"]})]})})]})})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"ðŸ“ˆ ç´¯è¨ˆå®Ÿç¸¾"}),(0,t.jsxs)("div",{className:"flex gap-6 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"å‹•ç”»è¦–è´: "}),(0,t.jsxs)("span",{className:"font-medium",children:[S.watchHistoryCount,"æœ¬"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"ãƒ–ãƒƒã‚¯ãƒžãƒ¼ã‚¯: "}),(0,t.jsxs)("span",{className:"font-medium",children:[S.bookmarkCount,"ä»¶"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"è¦–è´å®Œäº†: "}),(0,t.jsxs)("span",{className:"font-medium",children:[S.completedCount,"æœ¬"]})]})]})]})]}):(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium mb-3",children:"æœ€è¿‘ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£"}),A&&A.length>0?(0,t.jsx)("div",{className:"space-y-2",children:A.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[(e=>{switch(e){case"login":return(0,t.jsx)(u,{className:"w-4 h-4 text-blue-500"});case"video_view":return(0,t.jsx)(x.Play,{className:"w-4 h-4 text-green-500"});case"article_view":return(0,t.jsx)(m.FileText,{className:"w-4 h-4 text-purple-500"});case"search":return(0,t.jsx)(o.Search,{className:"w-4 h-4 text-orange-500"});case"bookmark_add":return(0,t.jsx)(d.Bookmark,{className:"w-4 h-4 text-yellow-500"});default:return(0,t.jsx)(i.Clock,{className:"w-4 h-4 text-gray-400"})}})(e.activity_type),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("span",{className:"font-medium text-sm",children:(e=>{switch(e){case"login":return"ãƒ­ã‚°ã‚¤ãƒ³";case"video_view":return"å‹•ç”»è¦–è´";case"article_view":return"è¨˜äº‹é–²è¦§";case"search":return"æ¤œç´¢";case"bookmark_add":return"ãƒ–ãƒƒã‚¯ãƒžãƒ¼ã‚¯è¿½åŠ ";case"bookmark_remove":return"ãƒ–ãƒƒã‚¯ãƒžãƒ¼ã‚¯å‰Šé™¤";default:return e}})(e.activity_type)}),e.target_title&&(0,t.jsxs)("span",{className:"text-gray-500 text-sm ml-2",children:["- ",e.target_title]})]}),(0,t.jsx)("span",{className:"text-xs text-gray-400",children:T(e.created_at)})]},e.id))}):(0,t.jsx)("p",{className:"text-gray-500 text-center py-8",children:"ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ãŒã‚ã‚Šã¾ã›ã‚“"})]})]})]})})}e.s(["default",()=>y],17230)}]);