(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31278,e=>{"use strict";let a=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>a],31278)},43531,e=>{"use strict";let a=(0,e.i(75254).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>a],43531)},24442,e=>{"use strict";var a=e.i(43476),t=e.i(71645);let r=(0,e.i(75254).default)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var l=e.i(43531),s=e.i(31278),i=e.i(57688);let n=[{id:"preset_1",label:"ビジネスマン",color:"bg-blue-500"},{id:"preset_2",label:"ビジネスウーマン",color:"bg-pink-500"},{id:"preset_3",label:"クリエイター",color:"bg-purple-500"},{id:"preset_4",label:"エンジニア",color:"bg-green-500"},{id:"preset_5",label:"起業家",color:"bg-orange-500"},{id:"preset_6",label:"研究者",color:"bg-teal-500"},{id:"preset_7",label:"マーケター",color:"bg-red-500"},{id:"preset_8",label:"デザイナー",color:"bg-yellow-500"},{id:"preset_9",label:"コンサルタント",color:"bg-indigo-500"},{id:"preset_10",label:"ニュートラル",color:"bg-gray-500"}];function c(){let[e,c]=(0,t.useState)(null),[d,o]=(0,t.useState)(!0),[x,m]=(0,t.useState)(!1),[u,p]=(0,t.useState)(null),[g,b]=(0,t.useState)(!1),[h,f]=(0,t.useState)(!1),y=(0,t.useRef)(null),[v,j]=(0,t.useState)({first_name:"",last_name:"",display_name:"",company:"",job_title:"",bio:"",avatar_preset:"preset_10",avatar_url:""});(0,t.useEffect)(()=>{N()},[]);let N=async()=>{try{let e=await fetch("/api/mypage/profile");if(e.ok){let a=await e.json();c(a.profile),j({first_name:a.profile.first_name||"",last_name:a.profile.last_name||"",display_name:a.profile.display_name||"",company:a.profile.company||"",job_title:a.profile.job_title||"",bio:a.profile.bio||"",avatar_preset:a.profile.avatar_preset||"preset_10",avatar_url:a.profile.avatar_url||""})}}catch(e){console.error("Failed to fetch profile:",e)}finally{o(!1)}},_=async e=>{e.preventDefault(),m(!0),p(null);try{let e=await fetch("/api/mypage/profile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});if(e.ok){let a=await e.json();c(a.profile),p({type:"success",text:"プロフィールを更新しました"})}else p({type:"error",text:"更新に失敗しました"})}catch(e){p({type:"error",text:"エラーが発生しました"})}finally{m(!1)}},w=async e=>{let a=e.target.files?.[0];if(!a)return;if(a.size>5242880)return void p({type:"error",text:"ファイルサイズは5MB以下にしてください"});f(!0);let t=new FormData;t.append("file",a);try{let e=await fetch("/api/mypage/profile/avatar",{method:"POST",body:t});if(e.ok){let a=await e.json();j({...v,avatar_url:a.url,avatar_preset:""}),b(!1),p({type:"success",text:"アイコンをアップロードしました"})}else p({type:"error",text:"アップロードに失敗しました"})}catch(e){p({type:"error",text:"エラーが発生しました"})}finally{f(!1)}};return d?(0,a.jsx)("div",{className:"p-8 flex justify-center",children:(0,a.jsx)(s.Loader2,{className:"w-8 h-8 animate-spin text-blue-500"})}):(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-8",children:"アカウント設定"}),u&&(0,a.jsx)("div",{className:`mb-6 p-4 rounded-lg ${"success"===u.type?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:u.text}),(0,a.jsxs)("form",{onSubmit:_,children:[(0,a.jsxs)("div",{className:"mb-8 flex items-center gap-6",children:[(0,a.jsx)("div",{className:"text-gray-600 w-32",children:"アイコン"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[v.avatar_url?(0,a.jsx)("div",{className:"w-20 h-20 rounded-full overflow-hidden",children:(0,a.jsx)(i.default,{src:v.avatar_url,alt:"Avatar",width:80,height:80,className:"object-cover w-full h-full"})}):(0,a.jsx)("div",{className:`w-20 h-20 rounded-full ${(()=>{if(v.avatar_url)return v.avatar_url;let e=n.find(e=>e.id===v.avatar_preset);return e?.color||"bg-gray-500"})()} flex items-center justify-center text-white text-2xl font-bold`,children:v.display_name?.[0]||v.first_name?.[0]||"U"}),(0,a.jsx)("button",{type:"button",onClick:()=>b(!0),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"変更する"})]})]}),(0,a.jsxs)("div",{className:"mb-6 flex items-start gap-6",children:[(0,a.jsx)("div",{className:"text-gray-600 w-32 pt-2",children:"名前"}),(0,a.jsxs)("div",{className:"flex-1 flex gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"block text-sm text-gray-500 mb-1",children:"姓"}),(0,a.jsx)("input",{type:"text",value:v.last_name,onChange:e=>j({...v,last_name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"田所",maxLength:30})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"block text-sm text-gray-500 mb-1",children:"名"}),(0,a.jsx)("input",{type:"text",value:v.first_name,onChange:e=>j({...v,first_name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"雅之",maxLength:30})]})]})]}),(0,a.jsxs)("div",{className:"mb-6 flex items-center gap-6",children:[(0,a.jsx)("div",{className:"text-gray-600 w-32",children:"表示名"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("input",{type:"text",value:v.display_name,onChange:e=>j({...v,display_name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"表示名を入力",maxLength:30}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"他のユーザーに表示される名前です"})]})]}),(0,a.jsxs)("div",{className:"mb-6 flex items-center gap-6",children:[(0,a.jsx)("div",{className:"text-gray-600 w-32",children:"メールアドレス"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-600",children:e?.email||"未設定"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["変更は",(0,a.jsx)("a",{href:"/mypage/settings/email",className:"text-blue-600 hover:underline",children:"メールアドレス設定"}),"から"]})]})]}),(0,a.jsxs)("div",{className:"mb-6 flex items-center gap-6",children:[(0,a.jsx)("div",{className:"text-gray-600 w-32",children:"企業・団体名"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("input",{type:"text",value:v.company,onChange:e=>j({...v,company:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"株式会社〇〇",maxLength:60}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"最大60文字"})]})]}),(0,a.jsxs)("div",{className:"mb-6 flex items-center gap-6",children:[(0,a.jsx)("div",{className:"text-gray-600 w-32",children:"肩書・役職"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("input",{type:"text",value:v.job_title,onChange:e=>j({...v,job_title:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"CEO",maxLength:60}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"最大60文字"})]})]}),(0,a.jsxs)("div",{className:"mb-8 flex items-start gap-6",children:[(0,a.jsx)("div",{className:"text-gray-600 w-32 pt-2",children:"プロフィール"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("textarea",{value:v.bio,onChange:e=>j({...v,bio:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"自己紹介を入力してください",rows:4,maxLength:1024}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["最大1024文字（",v.bio.length,"/1024）"]})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{type:"submit",disabled:x,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Loader2,{className:"w-4 h-4 animate-spin"}),"保存中..."]}):"保存する"})})]}),g&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-lg w-full mx-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"アイコンを変更"}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"プリセットから選ぶ"}),(0,a.jsx)("div",{className:"grid grid-cols-5 gap-3",children:n.map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>{var a;return a=e.id,void(j({...v,avatar_preset:a,avatar_url:""}),b(!1))},className:`relative w-12 h-12 rounded-full ${e.color} flex items-center justify-center text-white text-lg font-bold hover:ring-2 hover:ring-offset-2 hover:ring-blue-500 transition-all ${v.avatar_preset===e.id&&!v.avatar_url?"ring-2 ring-offset-2 ring-blue-500":""}`,title:e.label,children:[e.label[0],v.avatar_preset===e.id&&!v.avatar_url&&(0,a.jsx)("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-blue-600 rounded-full flex items-center justify-center",children:(0,a.jsx)(l.Check,{className:"w-3 h-3 text-white"})})]},e.id))})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"画像をアップロード"}),(0,a.jsx)("input",{ref:y,type:"file",accept:"image/*",onChange:w,className:"hidden"}),(0,a.jsx)("button",{type:"button",onClick:()=>y.current?.click(),disabled:h,className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-blue-500 hover:text-blue-600 transition-colors flex items-center justify-center gap-2",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Loader2,{className:"w-5 h-5 animate-spin"}),"アップロード中..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r,{className:"w-5 h-5"}),"画像を選択（5MB以下）"]})})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{type:"button",onClick:()=>b(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"閉じる"})})]})})]})}e.s(["default",()=>c],24442)}]);