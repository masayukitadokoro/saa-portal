(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,86536,e=>{"use strict";let t=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],86536)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},77705,e=>{"use strict";let t=(0,e.i(75254).default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);e.s(["EyeOff",()=>t],77705)},49153,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(86536),r=e.i(77705),l=e.i(31278),n=e.i(73375),i=e.i(22016);function c(){let e,c,d,o,[x,u]=(0,s.useState)(""),[m,h]=(0,s.useState)(""),[p,y]=(0,s.useState)(""),[g,b]=(0,s.useState)(!1),[f,j]=(0,s.useState)(!1),[N,v]=(0,s.useState)(!1),[w,k]=(0,s.useState)(!1),[S,C]=(0,s.useState)(null),E=(e=m.length>=8,c=m.length<=20,d=/[a-zA-Z]/.test(m),{minLength:e,maxLength:c,hasLetter:d,hasNumber:o=/[0-9]/.test(m),isValid:e&&c&&d&&o}),L=async e=>{if(e.preventDefault(),C(null),!x)return void C({type:"error",text:"現在のパスワードを入力してください"});if(!E.isValid)return void C({type:"error",text:"パスワードの要件を満たしていません"});if(m!==p)return void C({type:"error",text:"新しいパスワードが一致しません"});k(!0);try{let e=await fetch("/api/mypage/password",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:x,newPassword:m})}),t=await e.json();e.ok?(C({type:"success",text:"パスワードを変更しました"}),u(""),h(""),y("")):C({type:"error",text:t.error||"パスワードの変更に失敗しました"})}catch(e){C({type:"error",text:"エラーが発生しました"})}finally{k(!1)}};return(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsxs)(i.default,{href:"/mypage/settings/profile",className:"inline-flex items-center text-blue-600 hover:text-blue-800 mb-4",children:[(0,t.jsx)(n.ChevronLeft,{className:"w-4 h-4 mr-1"}),"ユーザ情報"]}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-8",children:"パスワード設定"}),S&&(0,t.jsx)("div",{className:`mb-6 p-4 rounded-lg ${"success"===S.type?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:S.text}),(0,t.jsxs)("form",{onSubmit:L,className:"max-w-md",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"現在のパスワード"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:g?"text":"password",value:x,onChange:e=>u(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-12",placeholder:"現在のパスワードを入力"}),(0,t.jsx)("button",{type:"button",onClick:()=>b(!g),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:g?(0,t.jsx)(r.EyeOff,{className:"w-5 h-5"}):(0,t.jsx)(a.Eye,{className:"w-5 h-5"})})]}),(0,t.jsx)("div",{className:"mt-2 text-right",children:(0,t.jsx)(i.default,{href:"/auth/reset-password",className:"text-sm text-blue-600 hover:underline",children:"パスワード未登録、または忘れた方はこちら"})})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"新しいパスワード"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:f?"text":"password",value:m,onChange:e=>h(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-12",placeholder:"新しいパスワードを入力"}),(0,t.jsx)("button",{type:"button",onClick:()=>j(!f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:f?(0,t.jsx)(r.EyeOff,{className:"w-5 h-5"}):(0,t.jsx)(a.Eye,{className:"w-5 h-5"})})]}),(0,t.jsx)("div",{className:"mt-2 text-sm text-gray-500",children:(0,t.jsx)("p",{className:E.minLength&&E.maxLength?"text-green-600":"",children:"※半角英数含む8-20文字"})}),m&&(0,t.jsx)("div",{className:"mt-2 space-y-1",children:(0,t.jsxs)("div",{className:"flex gap-2 text-xs",children:[(0,t.jsx)("span",{className:E.minLength?"text-green-600":"text-gray-400",children:"✓ 8文字以上"}),(0,t.jsx)("span",{className:E.maxLength?"text-green-600":"text-gray-400",children:"✓ 20文字以下"}),(0,t.jsx)("span",{className:E.hasLetter?"text-green-600":"text-gray-400",children:"✓ 英字を含む"}),(0,t.jsx)("span",{className:E.hasNumber?"text-green-600":"text-gray-400",children:"✓ 数字を含む"})]})})]}),(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"新しいパスワード（確認用）"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:N?"text":"password",value:p,onChange:e=>y(e.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-12 ${p&&p!==m?"border-red-500":"border-gray-300"}`,placeholder:"新しいパスワードを入力（確認用）"}),(0,t.jsx)("button",{type:"button",onClick:()=>v(!N),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:N?(0,t.jsx)(r.EyeOff,{className:"w-5 h-5"}):(0,t.jsx)(a.Eye,{className:"w-5 h-5"})})]}),p&&p!==m&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:"パスワードが一致しません"})]}),(0,t.jsx)("button",{type:"submit",disabled:w||!E.isValid||m!==p,className:"w-full py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 font-medium",children:w?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Loader2,{className:"w-5 h-5 animate-spin"}),"保存中..."]}):"保存する"})]})]})}e.s(["default",()=>c])}]);