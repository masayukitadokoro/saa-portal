(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,r)=>{t.exports=e.r(76562)},75254,e=>{"use strict";var t=e.i(71645);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},a=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,t.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:c="",children:o,iconNode:n,...d},m)=>(0,t.createElement)("svg",{ref:m,...s,width:r,height:r,stroke:e,strokeWidth:i?24*Number(l)/Number(r):l,className:a("lucide",c),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(d)&&{"aria-hidden":"true"},...d},[...n.map(([e,r])=>(0,t.createElement)(e,r)),...Array.isArray(o)?o:[o]])),i=(e,s)=>{let i=(0,t.forwardRef)(({className:i,...c},o)=>(0,t.createElement)(l,{ref:o,iconNode:s,className:a(`lucide-${r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,i),...c}));return i.displayName=r(e),i};e.s(["default",()=>i],75254)},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},30217,e=>{"use strict";function t(e,t){if(!e)return"";let r=e.replace(/^(\d+(?:-\d+)?)_/,"");return t?`${t} ${r}`:e.replace(/^(\d+(?:-\d+)?)_/,"$1 ")}e.s(["formatVideoTitle",()=>t])},55436,e=>{"use strict";let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},74997,e=>{"use strict";async function t(e){try{await fetch("/api/activities",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(e){console.error("Tracking error:",e)}}e.s(["track",0,{login:()=>t({activity_type:"login"}),videoView:(e,r)=>t({activity_type:"video_view",target_id:e,target_title:r}),videoComplete:(e,r,a)=>t({activity_type:"video_complete",target_id:e,target_title:r,metadata:a?{watch_time:a}:{}}),articleView:(e,r)=>t({activity_type:"article_view",target_id:e,target_title:r}),resourceDownload:(e,r,a)=>t({activity_type:"resource_download",target_id:e,target_title:r,metadata:a?{resource_type:a}:{}}),bookmarkAdd:(e,r)=>t({activity_type:"bookmark_add",target_id:e,target_title:r}),bookmarkRemove:(e,r)=>t({activity_type:"bookmark_remove",target_id:e,target_title:r}),search:(e,r)=>t({activity_type:"search",metadata:{query:e,result_count:r}})}])},22956,e=>{"use strict";var t=e.i(43476),r=e.i(30217),a=e.i(71645),s=e.i(74997),l=e.i(18566),i=e.i(22016),c=e.i(55436),o=e.i(71689),n=e.i(31278),d=e.i(63209);function m(){let e=(0,l.useSearchParams)().get("q")||"",[m,u]=(0,a.useState)([]),[h,x]=(0,a.useState)(!1),[p,y]=(0,a.useState)(null),[g,f]=(0,a.useState)(e);(0,a.useEffect)(()=>{e&&(f(e),b(e))},[e]);let b=async e=>{if(e.trim()){x(!0),y(null);try{let t=await fetch("/api/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e})});if(!t.ok)throw Error("æ¤œç´¢ã«å¤±æ•—ã—ã¾ã—ãŸ");let r=await t.json();u(r.results||[]),s.track.search(e,r.results?.length||0)}catch(e){console.error("Search error:",e),y("æ¤œç´¢ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚")}finally{x(!1)}}},v=()=>{g.trim()&&(window.history.pushState({},"",`/search?q=${encodeURIComponent(g.trim())}`),b(g.trim()))};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200",children:(0,t.jsx)("div",{className:"max-w-5xl mx-auto px-4",children:(0,t.jsxs)("div",{className:"flex items-center h-14 gap-4",children:[(0,t.jsxs)(i.default,{href:"/",className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[(0,t.jsx)(o.ArrowLeft,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"font-bold text-lg text-gray-900",children:"å‹•ç”»æ¤œç´¢"})]}),(0,t.jsx)("div",{className:"flex-1 max-w-2xl",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(c.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,t.jsx)("input",{type:"text",value:g,onChange:e=>f(e.target.value),onKeyDown:e=>{"Enter"===e.key&&v()},placeholder:"ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢...",className:"w-full pl-10 pr-20 py-2 bg-gray-50 border border-gray-200 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,t.jsx)("button",{onClick:v,className:"absolute right-2 top-1/2 -translate-y-1/2 px-4 py-1 bg-blue-600 text-white text-sm font-medium rounded-full hover:bg-blue-700 transition",children:"æ¤œç´¢"})]})})]})})}),(0,t.jsxs)("main",{className:"max-w-5xl mx-auto px-4 py-8",children:[e&&(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["ã€Œ",e,"ã€ã®æ¤œç´¢çµæžœ"]}),!h&&!p&&(0,t.jsxs)("p",{className:"text-gray-500 mt-1",children:[m.length,"ä»¶ã®å‹•ç”»ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ"]})]}),h&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-16",children:[(0,t.jsx)(n.Loader2,{className:"w-10 h-10 text-blue-600 animate-spin mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"AI ãŒé–¢é€£å‹•ç”»ã‚’æ¤œç´¢ä¸­..."})]}),p&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-16",children:[(0,t.jsx)(d.AlertCircle,{className:"w-12 h-12 text-red-500 mb-4"}),(0,t.jsx)("p",{className:"text-red-600 mb-4",children:p}),(0,t.jsx)("button",{onClick:()=>b(e),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"å†è©¦è¡Œ"})]}),!h&&!p&&m.length>0&&(0,t.jsx)("div",{className:"space-y-6",children:m.map(e=>(0,t.jsx)(i.default,{href:`/videos/${e.video_id}`,className:"block bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition group",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,t.jsxs)("div",{className:"relative w-full md:w-72 aspect-video md:aspect-auto md:h-40 flex-shrink-0 bg-gray-200",children:[(0,t.jsx)("img",{src:(e=>{if(e.custom_thumbnail_url)return e.custom_thumbnail_url;if(e.thumbnail_url)return e.thumbnail_url;if(e.video_url){let t=e.video_url.match(/youtu\.be\/([a-zA-Z0-9_-]+)/);if(t)return`https://img.youtube.com/vi/${t[1]}/mqdefault.jpg`;let r=e.video_url.match(/[?&]v=([a-zA-Z0-9_-]+)/);if(r)return`https://img.youtube.com/vi/${r[1]}/mqdefault.jpg`;let a=e.video_url.match(/embed\/([a-zA-Z0-9_-]+)/);if(a)return`https://img.youtube.com/vi/${a[1]}/mqdefault.jpg`}return"/placeholder.jpg"})(e),alt:(0,r.formatVideoTitle)(e.title,e.display_order),className:"w-full h-full object-cover group-hover:scale-105 transition",onError:e=>{e.target.src="/placeholder.jpg"}}),e.duration&&(0,t.jsx)("span",{className:"absolute bottom-2 right-2 bg-black/80 text-white text-xs px-2 py-0.5 rounded",children:(e=>{if(!e)return"";if("number"==typeof e){let t=Math.floor(e/60);return`${t}:${(e%60).toString().padStart(2,"0")}`}let t=String(e);if(t.includes(":"))return t;let r=t.match(/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/);if(r){let e=parseInt(r[1]||"0"),t=parseInt(r[2]||"0"),a=parseInt(r[3]||"0");return e>0?`${e}:${t.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`:`${t}:${a.toString().padStart(2,"0")}`}return t})(e.duration)}),(0,t.jsxs)("div",{className:"absolute top-2 left-2 bg-blue-600 text-white text-xs px-2 py-0.5 rounded-full",children:["é–¢é€£åº¦ ",Math.round(100*(e.similarity||0)),"%"]})]}),(0,t.jsxs)("div",{className:"p-4 flex-1",children:[(0,t.jsx)("h3",{className:"font-bold text-lg text-gray-900 mb-2 group-hover:text-blue-600 transition line-clamp-2",children:(0,r.formatVideoTitle)(e.title,e.display_order)}),e.comment&&(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsxs)("p",{className:"text-sm text-gray-700",children:["ðŸ’¡ ",e.comment]})}),e.relevant_excerpt&&(0,t.jsx)("div",{className:"bg-gray-50 rounded-lg p-3 border-l-4 border-blue-500",children:(0,t.jsxs)("p",{className:"text-sm text-gray-600 line-clamp-2",children:['"',e.relevant_excerpt,'"']})})]})]})},e.video_id))}),!h&&!p&&e&&0===m.length&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-16",children:[(0,t.jsx)(c.Search,{className:"w-12 h-12 text-gray-300 mb-4"}),(0,t.jsxs)("p",{className:"text-gray-600 mb-2",children:["ã€Œ",e,"ã€ã«ä¸€è‡´ã™ã‚‹å‹•ç”»ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ"]}),(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"åˆ¥ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢ã—ã¦ã¿ã¦ãã ã•ã„"})]}),!e&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-16",children:[(0,t.jsx)(c.Search,{className:"w-12 h-12 text-gray-300 mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦æ¤œç´¢ã—ã¦ãã ã•ã„"})]})]})]})}function u(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsx)(n.Loader2,{className:"w-10 h-10 text-blue-600 animate-spin"})}),children:(0,t.jsx)(m,{})})}e.s(["default",()=>u])}]);