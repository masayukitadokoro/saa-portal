(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},86536,e=>{"use strict";let t=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],86536)},30217,e=>{"use strict";function t(e,t){if(!e)return"";let a=e.replace(/^(\d+(?:-\d+)?)_/,"");return t?`${t} ${a}`:e.replace(/^(\d+(?:-\d+)?)_/,"$1 ")}e.s(["formatVideoTitle",()=>t])},31343,e=>{"use strict";let t=(0,e.i(75254).default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);e.s(["Play",()=>t],31343)},51705,e=>{"use strict";var t=e.i(43476),a=e.i(30217),l=e.i(71645),r=e.i(22016),s=e.i(57688),i=e.i(71930);let o=(0,e.i(75254).default)("bookmark-x",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m14.5 7.5-5 5",key:"3lb6iw"}],["path",{d:"m9.5 7.5 5 5",key:"ko136h"}]]);var c=e.i(31343),d=e.i(86536),n=e.i(71689);function m(){let[e,m]=(0,l.useState)([]),[u,h]=(0,l.useState)(!0),[x,f]=(0,l.useState)(null);(0,l.useEffect)(()=>{y()},[]);let y=async()=>{try{let e=await fetch("/api/mypage/bookmarks?limit=100");if(e.ok){let t=await e.json();m(t.bookmarks||[])}}catch(e){console.error("Failed to fetch bookmarks:",e)}finally{h(!1)}},p=async e=>{f(e);try{(await fetch(`/api/mypage/bookmarks?video_id=${e}`,{method:"DELETE"})).ok&&m(t=>t.filter(t=>t.video_id!==e))}catch(e){console.error("Failed to remove bookmark:",e)}finally{f(null)}};return(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200",children:[(0,t.jsx)("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(r.default,{href:"/mypage",className:"text-gray-400 hover:text-gray-600",children:(0,t.jsx)(n.ArrowLeft,{className:"w-5 h-5"})}),(0,t.jsxs)("h1",{className:"flex items-center gap-2 font-bold text-gray-900 text-lg",children:[(0,t.jsx)(i.Bookmark,{className:"w-5 h-5 text-amber-500"}),"ブックマーク"]}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:["(",e.length,"件)"]})]})}),u?(0,t.jsx)("div",{className:"p-8 text-center text-gray-500",children:"読み込み中..."}):e.length>0?(0,t.jsx)("div",{className:"divide-y divide-gray-100",children:e.map(e=>{var l;let i,n,m,u,h,f,y=(e=>{if(e.custom_thumbnail_url)return e.custom_thumbnail_url;if(e.thumbnail_url)return e.thumbnail_url;if(e.video_url){let t=function(e){if(!e)return null;let t=e.match(/(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([^&?\s]+)/);return t?t[1]:null}(e.video_url);if(t)return`https://img.youtube.com/vi/${t}/mqdefault.jpg`}return null})(e);return(0,t.jsxs)("div",{className:"flex gap-4 p-4 hover:bg-gray-50 transition-colors group",children:[(0,t.jsxs)(r.default,{href:`/videos/${e.video_id}`,className:"relative w-48 flex-shrink-0 aspect-video rounded-lg overflow-hidden bg-gray-200",children:[y?(0,t.jsx)(s.default,{src:y,alt:(0,a.formatVideoTitle)(e.title||"動画",e.display_order),fill:!0,className:"object-cover",unoptimized:y.includes("youtube.com")||y.includes("ytimg.com")}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,t.jsx)(c.Play,{className:"w-10 h-10 text-gray-400"})}),e.duration&&(0,t.jsx)("span",{className:"absolute bottom-1 right-1 px-1.5 py-0.5 bg-black/80 text-white text-xs rounded",children:function(e){if(!e)return"";let t=Math.floor(e/60);return`${t}:${(e%60).toString().padStart(2,"0")}`}(e.duration)}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/30 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-12 h-12 bg-white/90 rounded-full flex items-center justify-center",children:(0,t.jsx)(c.Play,{className:"w-6 h-6 text-gray-900 ml-1"})})})]}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)(r.default,{href:`/videos/${e.video_id}`,children:(0,t.jsx)("h3",{className:"font-medium text-gray-900 line-clamp-2 mb-2 text-base hover:text-blue-600 transition-colors",children:(0,a.formatVideoTitle)(e.title||"動画",e.display_order)})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-3",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(d.Eye,{className:"w-3.5 h-3.5"}),e.view_count?.toLocaleString()||0,"回視聴"]}),(0,t.jsx)("span",{children:"•"}),(0,t.jsxs)("span",{children:[(l=e.created_at,i=new Date,n=new Date(l),u=Math.floor((m=i.getTime()-n.getTime())/6e4),h=Math.floor(m/36e5),f=Math.floor(m/864e5),u<60?`${u}分前`:h<24?`${h}時間前`:0===f?"今日":1===f?"昨日":f<7?`${f}日前`:f<30?`${Math.floor(f/7)}週間前`:`${Math.floor(f/30)}ヶ月前`),"に保存"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(r.default,{href:`/videos/${e.video_id}`,className:"px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors",children:"視聴する"}),(0,t.jsxs)("button",{onClick:()=>p(e.video_id),disabled:x===e.video_id,className:"flex items-center gap-1 px-3 py-1.5 text-sm text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[(0,t.jsx)(o,{className:"w-4 h-4"}),x===e.video_id?"削除中...":"削除"]})]})]})]},e.video_id)})}):(0,t.jsxs)("div",{className:"p-12 text-center",children:[(0,t.jsx)(i.Bookmark,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-500 mb-2 text-lg",children:"ブックマークがありません"}),(0,t.jsx)("p",{className:"text-sm text-gray-400 mb-4",children:"気になる動画をブックマークして、後で見返しましょう"}),(0,t.jsxs)(r.default,{href:"/",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,t.jsx)(c.Play,{className:"w-4 h-4"}),"動画を見る"]})]})]})}e.s(["default",()=>m],51705)}]);